/*!
 * ecode-js v0.1.0
 * (c) 2019 Emoji Generator
 * @license MIT
 */
var e=function(e,r){return e(r={exports:{}},r.exports),r.exports}(function(e){function r(){}function o(){}!function(){function e(e,r){var o;r=r||1/0;for(var t=e.length,n=null,i=[],l=0;l<t;l++){if((o=e.charCodeAt(l))>55295&&o<57344){if(!n){if(o>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(l+1===t){(r-=3)>-1&&i.push(239,191,189);continue}n=o;continue}if(o<56320){(r-=3)>-1&&i.push(239,191,189),n=o;continue}o=n-55296<<10|o-56320|65536,n=null}else n&&((r-=3)>-1&&i.push(239,191,189),n=null);if(o<128){if((r-=1)<0)break;i.push(o)}else if(o<2048){if((r-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((r-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<2097152))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function t(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}r.prototype.encode=function(r){return"undefined"==typeof Uint8Array?e(r):new Uint8Array(e(r))},o.prototype.decode=function(e){return function(e,r,o){var n="",i="";o=Math.min(e.length,o||1/0);for(var l=r=r||0;l<o;l++)e[l]<=127?(n+=t(i)+String.fromCharCode(e[l]),i=""):i+="%"+e[l].toString(16);return n+t(i)}(e,0,e.length)}}(),e&&(e.exports.TextDecoderLite=o,e.exports.TextEncoderLite=r)});e.TextDecoderLite,e.TextEncoderLite;var r={encode:"undefined"!=typeof window&&"function"===window.btoa?e=>window.btoa(String.fromCharCode(Array.prototype.slice.call(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):e=>Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),decode:"undefined"!=typeof window&&"function"===window.atob?e=>Uint8Array.from(window.atob(e),e=>e.charCodeAt(0)):e=>new Uint8Array(Buffer.from(e,"base64"))};const{TextEncoderLite:o}=e,t=12,n={ja:0,kr:1,"zh-hant":2,"zh-hans":3,en:4},i={left:0,center:1,right:2},l={mdpi:0,hdpi:1,xhdpi:2,xxhdpi:3},c={png:0,webp:1};var a=class{constructor(){this.textEncoder=new o}encodeV1(e){const o=this.textEncoder.encode(e.text);if(0===o.length)throw new Error("empty string is not allowed");const a=new Uint8Array(t+o.length),f=e.locale||"ja",d=n[f.toLowerCase()];if("number"!=typeof d)throw new Error("Illegal locale `"+e.locale+"`");a[0]|=15&d;const s=this._encodeFlagsV1(e.flags);a[1]|=s<<2&252;const h=e.align||"left",p=i[h.toLowerCase()];if("number"!=typeof d)throw new Error("Illegal locale `"+e.align+"`");a[1]|=3&p;const u=e.size||"mdpi",g=l[u.toLowerCase()];if("number"!=typeof g)throw new Error("Illegal size `"+e.size+"`");a[2]|=g<<4&240;const w=e.format||"png",E=c[w.toLowerCase()];if("number"!=typeof E)throw new Error("Illegal format `"+e.format+"`");if(a[2]|=15&E,"number"!=typeof e.fontId)throw new Error("Illegal font ID `"+e.fontId+"`");a[3]|=255&e.fontId;const m=this._encodeColorV1(e.foregroundColor,255);a[4]|=m>>>24&255,a[5]|=m>>>16&255,a[6]|=m>>>8&255,a[7]|=255&m;const x=this._encodeColorV1(e.backgroundColor,4294967040);a[8]|=x>>>24&255,a[9]|=x>>>16&255,a[10]|=x>>>8&255,a[11]|=255&x;for(let e=0;e<o.length;++e)a[t+e]=o[e];return r.encode(a)}_encodeFlagsV1(e){let r=0;return e&&(e.sizeFixed&&(r|=1),e.stretch&&(r|=2)),r}_encodeColorV1(e,r){if("number"==typeof e)return e;if("string"==typeof e)return parseInt(e.replace(/^#/,""),16);if(!e)return r;throw new Error("Illegal color format `"+e+"`")}};const{TextDecoderLite:f}=e,d=12,s={0:"ja",1:"kr",2:"zh-Hant",3:"zh-Hans",4:"en"},h={0:"left",1:"center",2:"right"},p={0:"mdpi",1:"hdpi",2:"xhdpi",3:"xxhdpi"},u={0:"PNG",1:"WebP"};var g={EcodeEncoder:a,EcodeDecoder:class{constructor(){this.textDecoder=new f}decode(e){const o=r.decode(e);if(o.length<=d)throw new Error("Illegal byte length "+o.length);const t=1+(o[0]>>>4&15);if(1!=t)throw new Error("Illegal version "+t);const n=15&o[0],i=s[n];if("string"!=typeof i)throw new Error("Illegal locale ID "+n);const l={sizeFixed:!!(4&o[1]),stretch:!!(8&o[1])},c=3&o[1],a=h[c];if("string"!=typeof a)throw new Error("Illegal align ID "+c);const f=o[2]>>>4&15,g=p[f];if("string"!=typeof g)throw new Error("Illegal size ID "+f);const w=15&o[2],E=u[w];if("string"!=typeof E)throw new Error("Illegal format ID "+w);const m=255&o[3],x=((255&o[4])<<24|(255&o[5])<<16|(255&o[6])<<8|255&o[7])>>>0,y=((255&o[8])<<24|(255&o[9])<<16|(255&o[10])<<8|255&o[11])>>>0,I=Array.prototype.slice.call(o,12),b=this.textDecoder.decode(I);if(0===b.length)throw new Error("Empty string is not allowed");return{version:t,locale:{id:n,name:i},flags:l,align:{id:c,name:a},size:{id:f,name:g},format:{id:w,name:E},fontId:m,foregroundColor:{value:x,hex:x.toString(16)},backgroundColor:{value:y,hex:y.toString(16)},text:b}}}},w=g.EcodeEncoder,E=g.EcodeDecoder;export default g;export{E as EcodeDecoder,w as EcodeEncoder};
