/*!
 * ecode-js v0.1.0
 * (c) 2019 Emoji Generator
 * @license MIT
 */
var e=function(e,r){return e(r={exports:{}},r.exports),r.exports}(function(e){function r(){}function o(){}!function(){function e(e,r){var o;r=r||1/0;for(var t=e.length,n=null,i=[],l=0;l<t;l++){if((o=e.charCodeAt(l))>55295&&o<57344){if(!n){if(o>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(l+1===t){(r-=3)>-1&&i.push(239,191,189);continue}n=o;continue}if(o<56320){(r-=3)>-1&&i.push(239,191,189),n=o;continue}o=n-55296<<10|o-56320|65536,n=null}else n&&((r-=3)>-1&&i.push(239,191,189),n=null);if(o<128){if((r-=1)<0)break;i.push(o)}else if(o<2048){if((r-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((r-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<2097152))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function t(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}r.prototype.encode=function(r){return"undefined"==typeof Uint8Array?e(r):new Uint8Array(e(r))},o.prototype.decode=function(e){return function(e,r,o){var n="",i="";o=Math.min(e.length,o||1/0);for(var l=r=r||0;l<o;l++)e[l]<=127?(n+=t(i)+String.fromCharCode(e[l]),i=""):i+="%"+e[l].toString(16);return n+t(i)}(e,0,e.length)}}(),e&&(e.exports.TextDecoderLite=o,e.exports.TextEncoderLite=r)});e.TextDecoderLite,e.TextEncoderLite;var r={encode:"undefined"!=typeof window&&"function"===window.btoa?e=>window.btoa(String.fromCharCode(Array.prototype.slice.call(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):e=>Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),decode:"undefined"!=typeof window&&"function"===window.atob?e=>Uint8Array.from(window.atob(e),e=>e.charCodeAt(0)):e=>new Uint8Array(Buffer.from(e,"base64"))};const{TextEncoderLite:o}=e,t=12,n={ja:0,kr:1,"zh-hant":2,"zh-hans":3,en:4},i={left:0,center:1,right:2},l={mdpi:0,hdpi:1,xhdpi:2,xxhdpi:3},a={png:0,webp:1};var c=class{encodeV1(e){const c=e.text||"",f=(new o).encode(c);if(0===f.length)throw new Error("empty string is not allowed");const d=new Uint8Array(t+f.length),s=e.locale||"ja",h=n[s.toLowerCase()];if("number"!=typeof h)throw new Error("Illegal locale name : "+e.locale);d[0]|=15&h;const p=this._encodeFlagsV1(e.flags);d[1]|=p<<2&252;const g=e.align||"left",u=i[g.toLowerCase()];if("number"!=typeof u)throw new Error("Illegal align name : "+e.align);d[1]|=3&u;const w=e.size||"mdpi",m=l[w.toLowerCase()];if("number"!=typeof m)throw new Error("Illegal size name : "+e.size);d[2]|=m<<4&240;const y=e.format||"png",E=a[y.toLowerCase()];if("number"!=typeof E)throw new Error("Illegal format name : "+e.format);if(d[2]|=15&E,"number"!=typeof e.fontId)throw new Error("Illegal font ID `"+e.fontId+"`");d[3]|=255&e.fontId;const x=this._encodeColorV1(e.foregroundColor,255);d[4]|=x>>>24&255,d[5]|=x>>>16&255,d[6]|=x>>>8&255,d[7]|=255&x;const I=this._encodeColorV1(e.backgroundColor,4294967040);d[8]|=I>>>24&255,d[9]|=I>>>16&255,d[10]|=I>>>8&255,d[11]|=255&I;for(let e=0;e<f.length;++e)d[t+e]=f[e];return r.encode(d)}_encodeFlagsV1(e){let r=0;return e&&(e.sizeFixed&&(r|=1),e.stretch&&(r|=2)),r}_encodeColorV1(e,r){if("number"==typeof e)return e;if("string"==typeof e)return parseInt(e.replace(/^#/,""),16);if(!e)return r;throw new Error("Illegal color format `"+e+"`")}};const{TextDecoderLite:f}=e,d=12,s={0:"ja",1:"kr",2:"zh-Hant",3:"zh-Hans",4:"en"},h={0:"left",1:"center",2:"right"},p={0:"mdpi",1:"hdpi",2:"xhdpi",3:"xxhdpi"},g={0:"PNG",1:"WebP"};var u={EcodeEncoder:c,EcodeDecoder:class{constructor(){this.textDecoder=new f}decodeV1(e){const o=r.decode(e);if(o.length<=d)throw new Error("Illegal byte length "+o.length);const t=1+(o[0]>>>4&15);if(1!=t)throw new Error("Illegal version "+t);const n=15&o[0],i=s[n];if("string"!=typeof i)throw new Error("Illegal locale ID "+n);const l={sizeFixed:!!(4&o[1]),stretch:!!(8&o[1])},a=3&o[1],c=h[a];if("string"!=typeof c)throw new Error("Illegal align ID "+a);const f=o[2]>>>4&15,u=p[f];if("string"!=typeof u)throw new Error("Illegal size ID "+f);const w=15&o[2],m=g[w];if("string"!=typeof m)throw new Error("Illegal format ID "+w);const y=255&o[3],E=((255&o[4])<<24|(255&o[5])<<16|(255&o[6])<<8|255&o[7])>>>0,x=((255&o[8])<<24|(255&o[9])<<16|(255&o[10])<<8|255&o[11])>>>0,I=Array.prototype.slice.call(o,12),b=this.textDecoder.decode(I);if(0===b.length)throw new Error("Empty string is not allowed");return{version:t,locale:i,flags:l,align:c,size:u,format:{id:w,name:m},fontId:y,foregroundColor:{value:E,hex:E.toString(16)},backgroundColor:{value:x,hex:x.toString(16)},text:b}}}},w=u.EcodeEncoder,m=u.EcodeDecoder;export default u;export{m as EcodeDecoder,w as EcodeEncoder};
