/*!
 * ecode-js v0.1.0
 * (c) 2019 Emoji Generator
 * @license MIT
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).EcodeJs={})}(this,function(e){"use strict";function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&o(e.prototype,r),n&&o(e,n),e}var t=function(e,r){return e(r={exports:{}},r.exports),r.exports}(function(e){function r(){}function o(){}!function(){function e(e,r){var o;r=r||1/0;for(var n=e.length,t=null,i=[],a=0;a<n;a++){if((o=e.charCodeAt(a))>55295&&o<57344){if(!t){if(o>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(r-=3)>-1&&i.push(239,191,189);continue}t=o;continue}if(o<56320){(r-=3)>-1&&i.push(239,191,189),t=o;continue}o=t-55296<<10|o-56320|65536,t=null}else t&&((r-=3)>-1&&i.push(239,191,189),t=null);if(o<128){if((r-=1)<0)break;i.push(o)}else if(o<2048){if((r-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((r-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<2097152))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function n(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}r.prototype.encode=function(r){return"undefined"==typeof Uint8Array?e(r):new Uint8Array(e(r))},o.prototype.decode=function(e){return function(e,r,o){var t="",i="";o=Math.min(e.length,o||1/0);for(var a=r=r||0;a<o;a++)e[a]<=127?(t+=n(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return t+n(i)}(e,0,e.length)}}(),e&&(e.exports.TextDecoderLite=o,e.exports.TextEncoderLite=r)}),i=(t.TextDecoderLite,t.TextEncoderLite,{encode:"undefined"!=typeof window&&"function"===window.btoa?function(e){return window.btoa(String.fromCharCode(Array.prototype.slice.call(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}:function(e){return Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},decode:"undefined"!=typeof window&&"function"===window.atob?function(e){return Uint8Array.from(window.atob(e),function(e){return e.charCodeAt(0)})}:function(e){return new Uint8Array(Buffer.from(e,"base64"))}}),a=t.TextEncoderLite,l={ja:0,kr:1,"zh-hant":2,"zh-hans":3,en:4},f={left:0,center:1,right:2},c={mdpi:0,hdpi:1,xhdpi:2,xxhdpi:3},d={png:0,webp:1},u=function(){function e(){r(this,e),this.textEncoder=new a}return n(e,[{key:"encodeV1",value:function(e){var r=this.textEncoder.encode(e.text);if(0===r.length)throw new Error("empty string is not allowed");var o=new Uint8Array(12+r.length),n=e.locale||"ja",t=l[n.toLowerCase()];if("number"!=typeof t)throw new Error("Illegal locale `"+e.locale+"`");o[0]|=15&t;var a=this._encodeFlagsV1(e.flags);o[1]|=a<<2&252;var u=e.align||"left",s=f[u.toLowerCase()];if("number"!=typeof t)throw new Error("Illegal locale `"+e.align+"`");o[1]|=3&s;var h=e.size||"mdpi",p=c[h.toLowerCase()];if("number"!=typeof p)throw new Error("Illegal size `"+e.size+"`");o[2]|=p<<4&240;var g=e.format||"png",w=d[g.toLowerCase()];if("number"!=typeof w)throw new Error("Illegal format `"+e.format+"`");if(o[2]|=15&w,"number"!=typeof e.fontId)throw new Error("Illegal font ID `"+e.fontId+"`");o[3]|=255&e.fontId;var y=this._encodeColorV1(e.foregroundColor,255);o[4]|=y>>>24&255,o[5]|=y>>>16&255,o[6]|=y>>>8&255,o[7]|=255&y;var v=this._encodeColorV1(e.backgroundColor,4294967040);o[8]|=v>>>24&255,o[9]|=v>>>16&255,o[10]|=v>>>8&255,o[11]|=255&v;for(var m=0;m<r.length;++m)o[12+m]=r[m];return i.encode(o)}},{key:"_encodeFlagsV1",value:function(e){var r=0;return e&&(e.sizeFixed&&(r|=1),e.stretch&&(r|=2)),r}},{key:"_encodeColorV1",value:function(e,r){if("number"==typeof e)return e;if("string"==typeof e)return parseInt(e.replace(/^#/,""),16);if(!e)return r;throw new Error("Illegal color format `"+e+"`")}}]),e}(),s=t.TextDecoderLite,h={0:"ja",1:"kr",2:"zh-Hant",3:"zh-Hans",4:"en"},p={0:"left",1:"center",2:"right"},g={0:"mdpi",1:"hdpi",2:"xhdpi",3:"xxhdpi"},w={0:"PNG",1:"WebP"},y={EcodeEncoder:u,EcodeDecoder:function(){function e(){r(this,e),this.textDecoder=new s}return n(e,[{key:"decode",value:function(e){var r=i.decode(e);if(r.length<=12)throw new Error("Illegal byte length "+r.length);var o=1+(r[0]>>>4&15);if(1!=o)throw new Error("Illegal version "+o);var n=15&r[0],t=h[n];if("string"!=typeof t)throw new Error("Illegal locale ID "+n);var a={sizeFixed:!!(4&r[1]),stretch:!!(8&r[1])},l=3&r[1],f=p[l];if("string"!=typeof f)throw new Error("Illegal align ID "+l);var c=r[2]>>>4&15,d=g[c];if("string"!=typeof d)throw new Error("Illegal size ID "+c);var u=15&r[2],s=w[u];if("string"!=typeof s)throw new Error("Illegal format ID "+u);var y=255&r[3],v=((255&r[4])<<24|(255&r[5])<<16|(255&r[6])<<8|255&r[7])>>>0,m=((255&r[8])<<24|(255&r[9])<<16|(255&r[10])<<8|255&r[11])>>>0,E=Array.prototype.slice.call(r,12),x=this.textDecoder.decode(E);if(0===x.length)throw new Error("Empty string is not allowed");return{version:o,locale:{id:n,name:t},flags:a,align:{id:l,name:f},size:{id:c,name:d},format:{id:u,name:s},fontId:y,foregroundColor:{value:v,hex:v.toString(16)},backgroundColor:{value:m,hex:m.toString(16)},text:x}}}]),e}()},v=y.EcodeEncoder,m=y.EcodeDecoder;e.EcodeDecoder=m,e.EcodeEncoder=v,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})});
